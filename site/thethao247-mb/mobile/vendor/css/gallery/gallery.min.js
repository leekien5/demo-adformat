!function(t){let e,i,n,s,o,r,a,l=[],c=[],h=[],d=[],p=[],u=[],g={height:600,thumbHeight:80,items:3,customControls:{prevButton:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 129 129"><g><path d="m88.6,121.3c0.8,0.8 1.8,1.2 2.9,1.2s2.1-0.4 2.9-1.2c1.6-1.6 1.6-4.2 0-5.8l-51-51 51-51c1.6-1.6 1.6-4.2 0-5.8s-4.2-1.6-5.8,0l-54,53.9c-1.6,1.6-1.6,4.2 0,5.8l54,53.9z"/></g></svg>',nextButton:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 129 129"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>'}},v={},m={},f=[],w=[],b={init:function(){this.createElements(),this.setStyles(),this.setRespProp(),this.setLargeImgDimensions(),this.setThumbnailsWrapWidth(),this.setThumbnailsDimensions(),this.changeLargeImg(),this.justifyImgs(),this.prev(),this.next(),this.hzScroll(),this.setCustomControls(),this.responsive()},createElements:function(){e.prepend('<div class="large-image"></div><div class="thumbnails"></div>'),i=e.find(".large-image"),e.css({width:"100%","overflow-x":"hidden",outline:"none"}),l.push(e.find(".large-image")),e.append('<div class="controls"><div class="prev-button"></div><div class="next-button"></div></div>'),(n=e.find(".prev-button")).addClass("inactive"),c.push(n),s=e.find(".next-button"),h.push(s),(r=e.find(".thumbnails")).wrap('<div class="thmb-wrap"></div>'),r.append(e.find("img")),r.find("img").wrap('<div class="gallery-item"></div>'),d.push(r),(a=e.find(".gallery-item")).eq(0).addClass("active"),p.push(a),u.push(a.length),a.each(function(e){t(this).css("background-image","url("+t(this).find("img").attr("src")+")"),t(this).find("img").remove()});let g=a.eq(0).css("background-image");i.css("background-image",g),o=t(".thmb-wrap")},setStyles:function(){e.css({width:"100%","overflow-x":"hidden",position:"relative"}).find("div").css({"background-position":"center","background-repeat":"no-repeat"}),i.css("position","relative"),o.css("overflow-x","hidden"),r.css({display:"flex","flex-flow":"row wrap"}),r.children().css({"-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box",overflow:"hidden",border:"5px solid","border-color":"transparent","margin-top":"5px"})},setRespProp:function(){for(let e=0;e<f.length;e++){let i=[0];t.each(f[e],function(t,e){let n=Number(t);isNaN(n)||i.push(n)});let n=i.length-1;!function s(o){o<=n-1?l[e].width()>=i[o]&&l[e].width()<i[o+1]?v=t.extend({},w[e],f[e][i[o+1]]):s(o+1):v=t.extend({},w[e])}(0),f.splice(e,1,v)}},setLargeImgDimensions:function(){for(let t=0;t<f.length;t++)l[t].css({width:"100%",height:f[t].height})},setThumbnailsWrapWidth:function(){for(let t=0;t<f.length;t++)d[t].width(l[t].width()/f[t].items*u[t])},setThumbnailsDimensions:function(){for(let t=0;t<f.length;t++)p[t].css({width:l[t].width()/f[t].items,height:f[t].thumbHeight})},changeLargeImg:function(){t(".gallery-item").click(function(){let e=t(this).css("background-image");t(this).parent().parent().prev().css("background-image",e),t(this).parent().children().removeClass("active"),t(this).addClass("active");let i=t(this).parent().children();t(this).parent().parent().next().children().removeClass("inactive"),0===i.index(t(this))&&t(this).parent().parent().next().find(".prev-button").addClass("inactive"),i.index(t(this))===i.length-1&&t(this).parent().parent().next().find(".next-button").addClass("inactive")})},prev:function(){n.click(function(){let e=t(this).parent().prev().find(".active").prev(),i=t(this).parent().prev().find(".gallery-item"),n=t(i).index(e);n>=0?(t(this).parent().prev().prev().css("background-image",e.css("background-image")),e.addClass("active"),e.next().removeClass("active")):t(this).parent().prev().scrollLeft(0),b.setPositionOfItem.call(this,e,n,i),b.makeInactiveBtn.call(this,n,i)})},next:function(){s.click(function(){let e=t(this).parent().prev().find(".active").next(),i=t(this).parent().prev().find(".gallery-item"),n=t(i).index(e);n<i.length?(t(this).parent().prev().prev().css("background-image",e.css("background-image")),e.addClass("active"),e.prev().removeClass("active")):t(this).parent().prev().scrollLeft(i.length*i.width()),b.setPositionOfItem.call(this,e,n,i),b.makeInactiveBtn.call(this,n,i)})},setPositionOfItem:function(e,i,n){null!=e.position()&&e.position().left<-5&&t(this).parent().prev().scrollLeft((i+1)*n.width()-t(this).parent().parent().width()),null!=e.position()&&e.position().left>=t(this).parent().prev().width()-5&&t(this).parent().prev().scrollLeft(i*n.width())},makeInactiveBtn:function(e,i){t(this).parent().children().removeClass("inactive"),e>i.length-2||e<0?t(this).addClass("inactive"):e<1&&t(this).addClass("inactive")},justifyImgs:function(){for(let t=0;t<f.length;t++)l[t].css("background-size","cover"),p[t].css("background-size","cover")},hzScroll:function(e){let i,n,s,r=!1;(e=o).on("mousedown",function(t){r=!0,i=t.clientX,n=t.clientY,t.preventDefault()}),e.on("mouseup",function(){r=!1}),e.on("mousemove",function(e){if(r){let n=t(this).scrollLeft();s=-i+(i=e.clientX),t(this).scrollLeft(n-s)}})},setCustomControls:function(){n.append(v.customControls.prevButton),s.append(v.customControls.nextButton)},responsive:function(){t(window).on("resize",function(){b.setLargeImgDimensions(),b.setThumbnailsWrapWidth(),b.setThumbnailsDimensions(),b.setRespProp()})}};t.fn.gallery=function(i){return e=t(this),v=m=t.extend({},g,i),f.push(v),w.push(m),b.init(),this}}(jQuery);